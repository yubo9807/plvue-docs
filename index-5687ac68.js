"use strict";var S=Object.defineProperty;var T=(e,t,n)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var p=(e,t,n)=>(T(e,typeof t!="symbol"?t+"":t,n),n);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const h=require("pl-vue/lib/router"),s=require("pl-vue"),u=require("./server.js"),w=require("pl-vue/lib/utils"),E=require("axios-minified");require("http");require("fs");require("path");require("pl-vue/lib/store");const c=new Set,g=400;function R(e){const t=s.ref(!0),n=s.ref();let o=null;const a=Symbol("id");c.add(a);async function l(){if(t.value=!0,await L(g),c.delete(a),c.size===0)i.remove();else{const j=Number(n.value.dataset.sort),N=n.value.offsetHeight;n.value.remove(),[...i.children].forEach((f,y)=>{if(y<j)return;const P=parseInt(f.style.top);f.style.top=P-N-10+"px",f.dataset.sort=y+""})}}function d(){clearTimeout(o),t.value=!1}function b(){e.duration!==null&&(o=setTimeout(l,e.duration||4e3))}return s.h("div",{ref:n,className:()=>u.joinClass("comp-message",e.type,t.value&&"hidden"),"data-sort":c.size-1+"",style:`--time: ${g/1e3}s`,onmouseenter:d,onmouseout:b},e.message,s.h("span",{className:"icon-close",onclick:l},"×"))}let i=null;function r(e){if(!w.isBrowser())return;const t=s.render(s.h(R,{...e}));i??(i=s.render(s.h("div",{className:"comp-message-wrap"}))),i.appendChild(t),document.body.appendChild(i)}r.info=e=>r({message:e,type:"info"});r.success=e=>r({message:e,type:"success"});r.error=e=>r({message:e,type:"error"});r.warning=e=>r({message:e,type:"warning"});r.closeAll=async()=>{!w.isBrowser()&&!i||([...i.children].forEach(e=>{e.classList.add("hidden"),e.remove()}),c.clear(),i.remove())};class k{constructor(t){p(this,"config");p(this,"instance");w.isBrowser()&&U(),this.config=t,this.instance=E.create(t),this.instance.interceptors.request.use(n=>this.requestUse(n)),this.instance.interceptors.response.use(n=>this.responseUse(n),n=>{const{response:o,config:a,message:l}=n;if(o&&o.data)return this.responseUse(o);const{url:d}=n.config;return Promise.reject({code:500,msg:l||"network error: "+d})})}requestUse(t){return t}responseUse(t){const n=t.data;return(this[n.code]||this.error)(t)}200(t){return Promise.resolve(t.data)}error(t){const{data:n,config:o}=t;return!o.noTips&&r.error(n.msg),Promise.reject(n)}}function I(e){return e.then(t=>[null,t]).catch(t=>[t,null])}function L(e){return new Promise(t=>{setTimeout(t,e)})}function U(){window.addEventListener("online",()=>{r.closeAll(),r.success("网络恢复")}),window.addEventListener("offline",()=>{r({type:"error",message:"网络中断",duration:null})})}class $ extends k{constructor(){super({baseURL:u.env.BASE_API,timeout:5e3})}}const A=new $;function v(e){return I(A.instance(e))}function B(){return v({url:"/file/read",params:{path:"/plvue/config.json"}})}function F(e){return v({url:"/file/read",params:{path:e}})}const M="container-4ac8c9",_="side-f9a8bf",x="active-889810",D="content-a47edb",z="show-side-a60745",m={container:M,side:_,active:x,content:D,"show-side":"show-side-a60745",showSide:z};function q(e){return s.h("div",{className:u.joinClass("leayer",m.container)},s.h("ul",{className:()=>u.joinClass(m.side)},e.data.map(t=>s.h("li",null,s.h(h.Link,{to:`${e.path}/${t.value}`},t.label)))),s.h(h.Router,{prefix:e.path},...e.data.map(t=>s.h(h.Route,{path:"/"+t.value,component:H(C)}))))}function H(e){const t=function(...n){return e.apply(this,n)};return t.prototype=e.prototype,t}q.prototype.getInitialProps=async()=>{const[e,t]=await B(),n=[];if(e)return n;const o=JSON.parse(t.data.content);for(const a in o)n.push({label:o[a],value:a});return n};function C(e){const t=s.ref();return s.h("div",{ref:t,className:u.joinClass(m.content,"markdown")},s.h("div",{innerHTML:e.data}))}C.prototype.getInitialProps=async e=>{const[t,n]=await F(`/plvue${e.path.replace("/docs","")}.md`);return t?"":n.data.content};exports.default=q;
