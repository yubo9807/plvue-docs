var x=Object.defineProperty;var j=(e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var b=(e,t,n)=>(j(e,typeof t!="symbol"?t+"":t,n),n);import{j as w,e as A,u as I,_ as L}from"./main-17b78049.js";import{f as R,e as N,h as o,r as h,o as y,g as E,R as U,b as F,L as B,u as D,w as H,H as $,n as M,j as O}from"./pl-vue-9e733173.js";import{a as V}from"./axios-minified-06d31459.js";const p=new Set,P=400;let g=0;function z(e){const t=h(!0),n=h();let s=null;const i=Symbol("id");p.add(i),y(async()=>{n.value.style.top=g+"px";const m=n.value.offsetHeight;g+=m+10,await S(100),t.value=!1,a()});async function l(){if(t.value=!0,await S(P),p.delete(i),p.size===0)u.remove();else{const m=Number(n.value.dataset.sort),v=n.value.offsetHeight;g-=v+10,n.value.remove(),[...u.children].forEach((d,C)=>{if(C<m)return;const q=parseInt(d.style.top);d.style.top=q-v-10+"px",d.dataset.sort=C+""})}}function r(){clearTimeout(s),t.value=!1}function a(){e.duration!==null&&(s=setTimeout(l,e.duration||4e3))}return o("div",{ref:n,className:()=>w("comp-message",e.type,t.value&&"hidden"),"data-sort":p.size-1+"",style:`--time: ${P/1e3}s`,onmouseenter:r,onmouseout:a},e.message,o("span",{className:"icon-close",onclick:l},"×"))}let u=null;function c(e){if(!R())return;const t=N(o(z,{...e}));u??(u=N(o("div",{className:"comp-message-wrap"}))),u.appendChild(t),document.body.appendChild(u)}c.info=e=>c({message:e,type:"info"});c.success=e=>c({message:e,type:"success"});c.error=e=>c({message:e,type:"error"});c.warning=e=>c({message:e,type:"warning"});c.closeAll=async()=>{!R()&&!u||([...u.children].forEach(e=>{e.classList.add("hidden"),e.remove()}),p.clear(),g=0,u.remove())};class J{constructor(t){b(this,"config");b(this,"instance");R()&&K(),this.config=t,this.instance=V.create(t),this.instance.interceptors.request.use(n=>this.requestUse(n)),this.instance.interceptors.response.use(n=>this.responseUse(n),n=>{const{response:s,config:i,message:l}=n;if(s&&s.data)return this.responseUse(s);const{url:r}=n.config;return Promise.reject({code:500,msg:l||"network error: "+r})})}requestUse(t){return t}responseUse(t){const n=t.data;return(this[n.code]||this.error)(t)}200(t){return Promise.resolve(t.data)}error(t){const{data:n,config:s}=t;return!s.noTips&&c.error(n.msg),Promise.reject(n)}}function G(e){return e.then(t=>[null,t]).catch(t=>[t,null])}function S(e){return new Promise(t=>{setTimeout(t,e)})}function K(){window.addEventListener("online",()=>{c.closeAll(),c.success("网络恢复")}),window.addEventListener("offline",()=>{c({type:"error",message:"网络中断",duration:null})})}class Q extends J{constructor(){super({baseURL:A.BASE_API,timeout:5e3})}}const W=new Q;function T(e){return G(W.instance(e))}function X(){return T({url:"/file/read",params:{path:"/plvue/config.json"}})}function Y(e){return T({url:"/file/read",params:{path:e}})}const Z="container-4ac8c9",ee="side-f9a8bf",te="active-889810",ne="content-a47edb",se="show-side-a60745",f={container:Z,side:ee,active:te,content:ne,"show-side":"show-side-a60745",showSide:se};let _=null;function oe(e){_=e.data,E(()=>{_=null});const t=[];for(const a in e.data)t.push({label:e.data[a],value:a});const n=h(""),s=h(!1);let i=null;y(()=>{const a=O(),m=D();i=H(()=>a.path,v=>{const d=v.replace(e.path,"");if(!d||!(d.slice(1)in e.data)){M(()=>{m.replace(e.path+"/"+t[0].value)});return}n.value=d.slice(1)},{immediate:!0})}),E(()=>{i()});const l=I(),r=Symbol("side_btn");return y(()=>{const a=o("li",{className:f.showSide,onclick:()=>s.value=!s.value},"〒");l.add(r,a,1)}),E(()=>{l.delete(r)}),o("div",{className:w("leayer",f.container)},o("ul",{className:()=>w(f.side,s.value?f.active:""),onclick:()=>s.value=!1},t.map(a=>o("li",{className:()=>n.value===a.value&&f.active},o(B,{to:`${e.path}/${a.value}`},a.label)))),o(U,{prefix:e.path},...t.map(a=>o(F,{path:"/"+a.value,component:ae(k)}))))}oe.prototype.getInitialProps=async()=>{const[e,t]=await X();if(e)return{};const n=JSON.parse(t.data.content);return _=n,n};function ae(e){const t=function(...n){return e.apply(this,n)};return t.prototype=e.prototype,t}function k(e){const t=h(),n={title:e.data.config[e.path.split("/").pop()],description:""},s=e.data.content.match(/<p>(.+)<\/p>/);return s&&(n.description=s[1].replace(/<[^>]+>/g,"")),y(async()=>{L(()=>import("./highlight.js-5e1ab8e1.js").then(r=>r.d),["assets/highlight.js-5e1ab8e1.js","assets/axios-minified-06d31459.js","assets/highlight-c5123cb4.css"]);const i=(await L(()=>import("./highlight.js-5e1ab8e1.js").then(r=>r.c),["assets/highlight.js-5e1ab8e1.js","assets/axios-minified-06d31459.js","assets/highlight-c5123cb4.css"])).default;t.value.querySelectorAll("pre code").forEach(r=>{i.highlightElement(r)})}),o("div",{ref:t,className:w(f.content,"markdown")},o($,null,o("title",null,()=>n.title+" | Pl Vue"),o("meta",{name:"description",content:()=>n.description})),o("div",{innerHTML:e.data.content}))}k.prototype.getInitialProps=async e=>{const[t,n]=await Y(`/plvue${e.path.replace("/docs","")}.md`),s={config:_,content:""};return t||(s.content=n.data.content),s};export{oe as default};
