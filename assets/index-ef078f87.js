var I=Object.defineProperty;var S=(e,t,n)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var y=(e,t,n)=>(S(e,typeof t!="symbol"?t+"":t,n),n);import{j as m,e as U,_ as C}from"./main-82245017.js";import{b as _,r as L,h as a,d as p,o as E,e as N,R as j,a as x,L as D,u as H,w as $,H as F,n as M,f as O}from"./pl-vue-871d2792.js";import{a as V}from"./axios-minified-06d31459.js";const f=new Set,P=400;let v=0;function z(e){const t=p(!0),n=p();let s=null;const i=Symbol("id");f.add(i),E(async()=>{n.value.style.top=v+"px";const u=n.value.offsetHeight;v+=u+10,await T(100),t.value=!1,h()});async function o(){if(t.value=!0,await T(P),f.delete(i),f.size===0)l.remove();else{const u=Number(n.value.dataset.sort),R=n.value.offsetHeight;v-=R+10,n.value.remove(),[...l.children].forEach((w,b)=>{if(b<u)return;const A=parseInt(w.style.top);w.style.top=A-R-10+"px",w.dataset.sort=b+""})}}function r(){clearTimeout(s),t.value=!1}function h(){e.duration!==null&&(s=setTimeout(o,e.duration||4e3))}return a("div",{ref:n,className:()=>m("comp-message",e.type,t.value&&"hidden"),"data-sort":f.size-1+"",style:`--time: ${P/1e3}s`,onmouseenter:r,onmouseout:h},e.message,a("span",{className:"icon-close",onclick:o},"×"))}let l=null;function c(e){if(!_())return;const t=L(a(z,{...e}));l??(l=L(a("div",{className:"comp-message-wrap"}))),l.appendChild(t),document.body.appendChild(l)}c.info=e=>c({message:e,type:"info"});c.success=e=>c({message:e,type:"success"});c.error=e=>c({message:e,type:"error"});c.warning=e=>c({message:e,type:"warning"});c.closeAll=async()=>{!_()&&!l||([...l.children].forEach(e=>{e.classList.add("hidden"),e.remove()}),f.clear(),v=0,l.remove())};class B{constructor(t){y(this,"config");y(this,"instance");_()&&G(),this.config=t,this.instance=V.create(t),this.instance.interceptors.request.use(n=>this.requestUse(n)),this.instance.interceptors.response.use(n=>this.responseUse(n),n=>{const{response:s,config:i,message:o}=n;if(s&&s.data)return this.responseUse(s);const{url:r}=n.config;return Promise.reject({code:500,msg:o||"network error: "+r})})}requestUse(t){return t}responseUse(t){const n=t.data;return(this[n.code]||this.error)(t)}200(t){return Promise.resolve(t.data)}error(t){const{data:n,config:s}=t;return!s.noTips&&c.error(n.msg),Promise.reject(n)}}function J(e){return e.then(t=>[null,t]).catch(t=>[t,null])}function T(e){return new Promise(t=>{setTimeout(t,e)})}function G(){window.addEventListener("online",()=>{c.closeAll(),c.success("网络恢复")}),window.addEventListener("offline",()=>{c({type:"error",message:"网络中断",duration:null})})}class K extends B{constructor(){super({baseURL:U.BASE_API,timeout:5e3})}}const Q=new K;function k(e){return J(Q.instance(e))}function W(){return k({url:"/file/read",params:{path:"/plvue/config.json"}})}function X(e){return k({url:"/file/read",params:{path:e}})}const Y="container-4ac8c9",Z="side-f9a8bf",ee="active-889810",te="content-a47edb",ne="show-side-a60745",d={container:Y,side:Z,active:ee,content:te,"show-side":"show-side-a60745",showSide:ne};let g=null;function se(e){g=e.data,N(()=>{g=null});const t=[];for(const o in e.data)t.push({label:e.data[o],value:o});const n=p(""),s=p(!1);let i=null;return E(()=>{const o=O(),r=H();i=$(()=>o.path,h=>{const u=h.replace(e.path,"");if(!u||!(u.slice(1)in e.data)){M(()=>{r.replace(e.path+"/"+t[0].value)});return}n.value=u.slice(1)},{immediate:!0})}),N(()=>{i()}),a("div",{className:m("leayer",d.container)},a("ul",{className:()=>m(d.side,s.value?d.active:""),onclick:()=>s.value=!1},t.map(o=>a("li",{className:()=>n.value===o.value&&d.active},a(D,{to:`${e.path}/${o.value}`},o.label)))),a(j,{prefix:e.path},...t.map(o=>a(x,{path:"/"+o.value,component:oe(q)}))),a("div",{className:()=>m(d.showSide,s.value?d.active:""),onclick:()=>s.value=!s.value}))}se.prototype.getInitialProps=async()=>{const[e,t]=await W();if(e)return{};const n=JSON.parse(t.data.content);return g=n,n};function oe(e){const t=function(...n){return e.apply(this,n)};return t.prototype=e.prototype,t}function q(e){const t=p(),n={title:e.data.config[e.path.split("/").pop()],description:""},s=e.data.content.match(/<p>(.+)<\/p>/);return s&&(n.description=s[1].replace(/<[^>]+>/g,"")),E(async()=>{C(()=>import("./highlight.js-5e1ab8e1.js").then(r=>r.d),["assets/highlight.js-5e1ab8e1.js","assets/axios-minified-06d31459.js","assets/highlight-c5123cb4.css"]);const i=(await C(()=>import("./highlight.js-5e1ab8e1.js").then(r=>r.c),["assets/highlight.js-5e1ab8e1.js","assets/axios-minified-06d31459.js","assets/highlight-c5123cb4.css"])).default;t.value.querySelectorAll("pre code").forEach(r=>{i.highlightElement(r)})}),a("div",{ref:t,className:m(d.content,"markdown")},a(F,null,a("title",null,()=>n.title+" | Pl Vue"),a("meta",{name:"description",content:()=>n.description})),a("div",{innerHTML:e.data.content}))}q.prototype.getInitialProps=async e=>{const[t,n]=await X(`/plvue${e.path.replace("/docs","")}.md`),s={config:g,content:""};return t||(s.content=n.data.content),s};export{se as default};
