var lt=Object.defineProperty;var ft=(e,n,t)=>n in e?lt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var g=(e,n,t)=>(ft(e,typeof n!="symbol"?n+"":n,t),t),he=(e,n,t)=>{if(!n.has(e))throw TypeError("Cannot "+t)};var _=(e,n,t)=>(he(e,n,"read from private field"),t?t.call(e):n.get(e)),E=(e,n,t)=>{if(n.has(e))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(e):n.set(e,t)},Oe=(e,n,t,r)=>(he(e,n,"write to private field"),r?r.call(e,t):n.set(e,t),t);var x=(e,n,t)=>(he(e,n,"access private method"),t);function je(){return Number((Math.random()+"").slice(2)).toString(32)}function j(...e){console.warn(...e)}function h(e){return e.length}function ae(e){return Object.prototype.toString.call(e).slice(8,-1)}function ht(e){return e.toString().slice(0,5)==="class"}function ke(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function H(e,n){if(q(e)&&q(n)){const t=Object.keys(e),r=Object.keys(n);if(h(t)!==h(r))return!1;for(const s of t)if(!r.includes(s)||!H(e[s],n[s]))return!1;return!0}else return e===n}function le(){return typeof window=="object"}function q(e){return typeof e=="object"&&e!==null}function fe(e){return O(e)||ae(e)==="Array"}function O(e){return ae(e)==="Object"}function B(e){return Array.isArray(e)}function k(e){return typeof e=="string"}function y(e){return typeof e=="function"}function U(e){Promise.resolve().then(e)}class $ extends WeakMap{}function T(e,n={}){const t=new $,r=["Null","Regexp","Date","WeakSet","WeakMap"],s=Object.assign({Function(c){const o=function(...i){return c.apply(this,i)};return o.prototype=u(c.prototype),o},Set(c){const o=new Set;for(const i of c)o.add(u(i));return o},Map(c){const o=new Map;for(const[i,a]of c.entries())o.set(i,u(a));return o}},n);function u(c){if(le()&&c instanceof HTMLElement)return c.cloneNode(!0);const o=ae(c);if(!["object","function"].includes(typeof c)||r.includes(o))return c;if(t.has(c))return t.get(c);if(s[o])return s[o](c);const i=B(c)?[]:{};Object.setPrototypeOf(i,Object.getPrototypeOf(c)),t.set(c,i);for(const a in c)c.hasOwnProperty(a)&&(i[a]=u(c[a]));return i}return u(e)}function ee(e,n){return Object.assign({},e,n)}function m(e,n){let t=0;for(;t<h(e);)n(e[t],t),t++}function Ve(e,n){let t=0;for(;t<h(e);){const r=e[t];if(n(r,t))return t;t++}return-1}function Ke(e,n){const t=Ve(e,n);return e[t]}function dt(e,n,t=r=>r){let r=0,s=h(e)-1;for(;r<=s;){const u=Math.ceil((r+s)/2),c=e[u],o=t(c);if(n===o)return u;n<o?s=u-1:n>o&&(r=u+1)}return-1}let D=null;const te=new $;function xe(e){D=e,e(),D=null}function Ge(e,n){if(!D)return;const t=te.get(e)||[],r=Ke(t,s=>D===s.fn);if(r)r.s.add(n),r.s;else{const s=new Set([n]);t.push({s,fn:D}),te.set(e,t)}U(()=>null)}function $e(e,n){const t=te.get(e);t&&(m(t,(r,s)=>{r.fn(n)===!0&&delete t[s]}),te.set(e,t.filter(r=>r)))}function Je(e){for(const n in e){Ge(e,n);const t=e[n];fe(t)&&Je(t)}}const Me=Symbol("__v_raw"),Qe=Symbol("__v_isRef"),He=Symbol("__v_isShallow"),Pe=Symbol("__v_isShallowBest"),ge=Symbol("__v_isReadonly");function Ce(e,n={}){const t=n.readonly,r=n.shallowBest,s=n.shallow;t&&Reflect.defineProperty(e,ge,{value:!0});const u=new Set;return new Proxy(e,{get(c,o,i){if(o===Me)return c;const a=Reflect.get(c,o);return t?a:s?(Je(c),a):(Ge(c,o),r?a:fe(a)?Ce(a,n):a)},set(c,o,i,a){if(c[ge])return!0;const l=Reflect.get(c,o);if(t)return j(`Set operation on key '${o.toString()}' failed: target is readonly.`,{[o.toString()]:l}),!0;if(H(l,i))return!0;const p=Reflect.set(c,o,i);u.add(o);const f=u.size;return U(()=>{if(f<u.size)return;const b=Reflect.get(c,o);p&&!H(l,b)&&$e(c,u),u.clear()}),p},deleteProperty(c,o){if(!ke(c,o))return!0;const i=Reflect.get(c,o);if(t)return j(`Delete operation on key '${o.toString()}' failed: target is readonly.`,{[o.toString()]:i}),!0;const a=Reflect.deleteProperty(c,o);u.add(o);const l=u.size;return U(()=>{if(l<u.size)return;const p=ke(c,o),f=Reflect.get(c,o);a&&!p&&!H(i,f)&&$e(c,u),u.clear()}),a}})}const pt=new $;function Ne(e){return!fe(e)||Object.isFrozen(e)?(j(`lue cannot be made reactive: ${e}`),e):pt.get(e)?e:Ce(e)}function mt(e){return q(e)&&!!e[Me]}function _e(e){return mt(e)?e[Me]:e}var $t,Ht,Pt;class Ye{constructor(n,t=0){g(this,$t,!0);g(this,Ht,!1);g(this,Pt,!1);g(this,"_rawValue");g(this,"_value");const r=t===1,s=t===2;this[He]=r,this[Pe]=s,this._rawValue=n,this._value=Ce({value:n},{shallow:r,shallowBest:s})}get value(){return this._value.value}set value(n){this._rawValue=n,this._value.value=n}}$t=Qe,Ht=He,Pt=Pe;function Xe(e=void 0){return new Ye(e)}function Dt(e=void 0){return new Ye(e,2)}class gt{constructor(n){g(this,"fn");g(this,"computed");g(this,"active",!0);this.fn=n,this.computed=Xe(n()),this.scheduler()}scheduler(){xe(()=>{if(!this.active)return!0;this.computed.value=this.run()})}run(){return this.fn()}stop(){this.active=!1}}var It,At;class Ie{constructor(n,t,r=!1){g(this,It,!0);g(this,At,!0);g(this,"_cacheable",!0);g(this,"effect");g(this,"_setter");g(this,"_value");g(this,"_dirty");this.effect=new gt(n),this._setter=t,this._dirty=r}get value(){return this._dirty?this.effect.computed.value:this.effect.fn()}set value(n){this._setter?this._setter(n):j("Write operation failed: computed value is readonly")}}It=ge,At=Qe;function vt(e){return y(e)?new Ie(e,null,!0):new Ie(e.get,e.set,!0)}function yt(e,n,t={}){let r=!1;if(r)return;const s=e();t.immediate&&n(s,void 0);let u=T(s),c=!0;return xe(()=>{if(r)return!0;const o=e();if(fe(o)){t.deep&&!H(o,u)&&(n(o,u),u=T(o));return}if(c){c=!1;return}o!==u&&(n(o,u),u=o)}),()=>{r=!0,u=e=n=t=null}}function P(e){return["string","number"].includes(typeof e)&&e!==""}function Ze(e){return!/^on/.test(e)}function wt(e){return O(e)&&k(e.tag)}function R(e){return y(e)&&!v(e)}function et(e){return ht(e)&&e.prototype&&e.prototype.render}function ye(e){return[void 0,null,"",!0,!1].includes(e)}function we(...e){const n=[];return m(e,t=>{y(t)&&(t=t()),P(t)&&n.push(t)}),n.join(" ").trim().replace(/\s+/," ")}function de(e){return document.createTextNode(e)}function A(e,n){e.appendChild(n)}function w(e,n,...t){const r={tag:e,attrs:n||{},children:t};return R(r.tag)&&h(r.children)===0&&r.attrs.children&&(r.children=r.attrs.children),r}function L({children:e}){return e}const ne=Symbol("Fragment");L.prototype[ne]=ne;function v(e){return y(e)&&e.prototype&&e.prototype[ne]===ne}const Q=new $;function tt(e,n=[]){return m(e,t=>{q(t)&&(R(t.tag)?(n.push({comp:t.tag,props:ee(t.attrs,{children:e})}),m(t.children,r=>{R(r)&&n.push({comp:r,props:{}})})):P(t.tag)&&tt(t.children,n))}),n}function Ee(e,n=[]){const t=Q.get(e)||[];return n.push(...t),m(t,r=>{const s=Ee(r.comp);n.push(...s)}),n}let re=null;function bt(e){re=e}let Ae=null;function St(e,n){re=e,"ref"in n&&(n.ref.value=Ae),Ae=null}let Fe=!1;function Be(e){Fe=e}const De=[];function Rt(){m(De,e=>e()),De.length=0}const be=[];let nt=!1;function Tt(e){if(!Fe){if(nt){U(e);return}be.push(e)}}function xt(){m(be,e=>e()),be.length=0,nt=!0}const ve=new $;function We(e){const n=Ee(e).map(r=>r.comp);n.unshift(e);const t=[];m(n,r=>{const s=ve.get(r)||[];t.push(...s),ve.delete(r)}),m(t,r=>r())}const se=new $;function Mt(e){if(Fe)return;const n=se.get(re)||[];n.some(r=>r===e)||(n.push(e),se.set(re,n))}function qe(e){const n=Ee(e).map(r=>r.comp);n.unshift(e);const t=[];m(n,r=>{const s=se.get(r)||[];t.push(...s),se.delete(r)}),m(t,r=>r())}class Ct{constructor(){}intercept(n){return n}renderToString(n){Be(!0);const t=this.createHTML(n);return Be(!1),t}createHTML(n){const{tag:t,attrs:r,children:s}=this.intercept(n);if(v(t)){const o=ee(r,{children:s}),i=t(o);return this.createHTMLFragment(i)}if(R(t)){if(et(t)){const a=new t({...r,children:s});return this.createHTML(a.render.bind(a))}const o=ee(r,{children:s}),i=t(o);return this.createHTML(i)}let u="";for(const o in r){if(o.startsWith("on")||["ref","created"].includes(o))continue;let i=y(r[o])&&Ze(o)?r[o]():r[o];if(k(t)&&["innerHTML","innerText","textContent"].includes(o)){s[0]=i;continue}if(o==="className"){i&&(u+=` class="${we(...[i].flat())}"`);continue}if(o==="style"&&O(i)){for(const a in i)y(i[a])&&(i[a]=i[a]());i='"'+JSON.stringify(i).slice(1,-1).replace(/"/g,"").replace(/,/g,";")+'"'}u+=` ${o}="${i}"`}const c=this.createHTMLFragment(s);return`<${t}${u}>${c}</${t}>`}createHTMLFragment(n){let t="";return m(n,r=>{if(!ye(r)){if(P(r)){t+=r.toString();return}if(B(r)){t+=this.createHTMLFragment(r);return}if(y(r)){const s=r();t+=this.createHTMLFragment([s]);return}if(O(r)){t+=this.createHTML(r);return}j(`renderToString: 不支持 ${r} 值渲染`)}}),t}}var C,V,Se,I,Y,ce,rt,ue,st;class Nt extends Ct{constructor(t){super();E(this,V);E(this,I);E(this,ce);E(this,ue);E(this,C,void 0);Oe(this,C,t.binding)}render(t){const r=this.createElement(t);return Rt(),U(xt),r}createElement(t){const{tag:r,attrs:s,children:u}=this.intercept(t);if(k(r))return this.createRealNode(r,s,u);if(v(r))return this.createNodeFragment(u);if(R(r))return this.createComponent(r,s,u)}createComponent(t,r,s){if(bt(t),et(t)){const o=new t({...r,children:s});t=o.render.bind(o)}const u=ee(r,{children:s}),c=t(u);return St(t,r),P(c)?de(c):(Q.set(t,tt([c,...c.children])),this.createElement(c))}createRealNode(t,r={},s=[""]){const u=document.createElement(t),c=r.created;if(y(c)){const o=Ve(s,i=>i===c);o>=0&&s.splice(o,1)}m(s,o=>{const i=this.intercept(o);if(y(i)){const a=this.createNodeFragment([i]);A(u,a)}else x(this,V,Se).call(this,u,i)});for(const o in r)x(this,ce,rt).call(this,u,o,r[o]);if(r.style&&O(r.style))for(const o in r.style){const i=r.style[o];y(i)?_(this,C).call(this,()=>u.style.setProperty(o,i())):u.style[o]=i}return u}createNodeFragment(t){const r=document.createDocumentFragment();return m(t,s=>{const u=this.intercept(s);y(u)?x(this,ue,st).call(this,r,u):x(this,V,Se).call(this,r,u)}),r}}C=new WeakMap,V=new WeakSet,Se=function(t,r){if(!ye(r)){if(B(r)){const s=this.createNodeFragment(r);A(t,s);return}if(P(r)||O(r)){const s=x(this,I,Y).call(this,r);A(t,s);return}j(`render: 不支持 ${r} 值渲染`)}},I=new WeakSet,Y=function(t){if(P(t))return de(t);if(wt(t))return this.createRealNode(t.tag,t.attrs,t.children);if(v(t.tag))return this.createNodeFragment(t.children);if(R(t.tag))return this.createComponent(t.tag,t.attrs,t.children)},ce=new WeakSet,rt=function(t,r,s){if(r==="ref"&&O(s)){s.value=t;return}if(r==="created"&&y(s)){s(t);return}if(r==="className"&&B(s)){_(this,C).call(this,()=>{t[r]=we(...s)});return}let u=c=>t[r]=c;r==="className"?u=c=>t[r]=we(c):r.startsWith("data-")&&(u=c=>t.dataset[r.slice(5)]=c),Ze(r)&&y(s)?_(this,C).call(this,()=>u(s())):u(s)},ue=new WeakSet,st=function(t,r){let s=[],u=!0,c=null;const o=de("");A(t,o),_(this,C).call(this,()=>{let i=r();if(i&&q(i)&&v(i.tag)){j("不支持响应式节点片段渲染");return}B(i)||(i=[i]),i=i.filter(l=>!ye(l));let a=0;for(;a<h(i);){let l=i[a];const p=dt(s,a,f=>f.key);if(p>=0){if(H(l,s[p].tree)){a++;continue}const f=x(this,I,Y).call(this,l);if(!f){i.splice(p,1),a++;continue}const b=s[p].tree;if(R(b.tag)&&We(b.tag),s[p].node.parentElement.replaceChild(f,s[p].node),R(b.tag)){const G=b.tag;qe(G),Q.delete(G)}s[p].tree=l,s[p].node=f}else{const f=x(this,I,Y).call(this,l);if(!f){a++;continue}if(u)A(t,f);else if(h(s)===0)c??(c=o.parentElement),c.insertBefore(f,o.nextSibling);else{const b=s[h(s)-1].node,G=b.nextSibling;b.parentElement.insertBefore(f,G)}s.push({key:a,tree:l,node:f})}a++}if(h(s)>h(i)){for(let l=h(i);l<h(s);l++){const p=s[l].tree;if(R(p.tag)&&We(p.tag),s[l].node.remove(),R(p.tag)){const f=p.tag;qe(f),Q.delete(f)}}s.splice(h(i),h(s)-h(i))}u=!1})};var K;class _t extends Nt{constructor(t){super(t);g(this,"version","0.6.10");E(this,K,new Map);this.option=t}use(t){return t.install(this),this}intercept(t){if(t&&k(t.tag)){const r=_(this,K).get(t.tag);r&&(t.tag=r)}return t}component(t,r){return _(this,K).set(t,r),this}}K=new WeakMap;function Wt(){return new _t({binding:xe})}function Et(e){const n={};return e.replace(/([^?&=]+)=([^&]+)/g,(t,r,s)=>n[r]=s),n}function X(e){const n=new URL("http://0.0.0.0"+e);return{fullPath:n.href.replace(n.origin,""),path:n.pathname,query:Et(n.search),hash:n.hash,meta:{}}}function ot(e){let n="";for(const r in e.query)e.query[r]&&(n+=`${r}=${e.query[r]}&`);n=n?"?"+n.slice(0,-1):"";let t=e.hash?"#"+e.hash:"";return e.path+n+t}function Z(e){return e.replace(/\/{1,}/g,"/")}function it(e,n){k(e)&&(S.mode==="history"&&(e=S.base+e),e=X(e));for(const r in e)d[r]=e[r];const t=ot(d);d.fullPath=t,le()&&(S.mode==="history"?history[n==="push"?"pushState":"replaceState"]({},"",t):location.hash=t)}function ct(e){it(e,"push")}function ut(e){it(e,"replace")}function pe(e){history.go(e)}function Ft(){return{back:()=>pe(-1),forward:()=>pe(1),go:pe,push:ct,replace:ut,options:S,currentRoute:_e(d)}}function at(){return d}const S={base:"",mode:"history",ssrDataKey:"g_initialProps"};let oe=null,d=null;function Ue(){const{origin:e,href:n,hash:t}=location;return S.mode==="hash"?t.replace("#",""):n.replace(e+S.base,"")}let z=null;function qt(e={}){if(Object.assign(S,e),le()){const t=X(Ue());d=Ne(t),window.addEventListener("popstate",()=>{const r=X(Ue());for(const s in r)d[s]=r[s]})}else d=X("");const n=Ft();return{install(t){oe=t,t.$router=n,t.$route=at()},...n,beforeEach(t){z=t}}}const N={currentTemplate:"",ssrData:{}};function Ut(e){}function Le(e,n){n=n.replace(S.base,"");const t=Ke(e,i=>{const{path:a,exact:l}=i.attrs;return l===!1?(n+"/").startsWith(Z(a+"/")):Z(a)===n});if(!t)return;const{path:r,component:s,beforeEnter:u,meta:c,redirect:o}=t.attrs;return o?Le(e,o):{path:Z(r),component:s,meta:c,beforeEnter:u}}let F;const ze=[];function Lt(e){const n=Xe(e.loading);let t={};function r(u){const c=Le(e.children,u);if(!c){t={},n.value=e.notFound;return}async function o(){if(c.component.prototype||(c.component=(await c.component()).default),n.value===c.component)return;t.path=c.path;const a=Te(c.component);if(a){const l=window[S.ssrDataKey];l&&t.path in l?(t.data=l[t.path],delete l[t.path]):t.data=await a(T(t))}n.value=c.component,t.meta=c.meta,d.meta=c.meta}function i(a){a(_e(d),F,()=>{F=T(d),u===d.path?o():r(d.path)})}if(z){i(z);return}if(c.beforeEnter){i(c.beforeEnter);return}F=T(d),o()}const s=yt(()=>d.path,u=>{if(F){const c=F.path.split("/"),o=u.split("/");c[1]!==o[1]&&m(ze,i=>i())}r(u)},{immediate:!0});return e.prefix&&ze.push(s),w(L,null,()=>n.value&&w(n.value,{...t}))}const W=Ne([]);function Re(e){const n=W.indexOf(e);W.splice(n,1)}let M=null;function Ot(e){function n(o){let i=Le(e.children,o);if(!i)return;d.path=i.path;function a(l){return M=`b_${je()}`,W.push(M),l(_e(d),F,()=>{F=T(d),J(M,i.component,{path:i.path,meta:i.meta}),Re(M)}),M}return z?a(z):i.beforeEnter?a(i.beforeEnter):i}let t=n(d.path);if(k(t))return w(L,null,t);if(!t){const o=e.notFound;return w(o||L,null)}t=t;let r=t.component;d.path=t.path,d.meta=t.meta;const s={path:t.path,meta:t.meta};M&&(J(M,r,s),Re(M));const u=`r_${je()}`;if(!r.prototype)return W.push(u),r().then(async o=>{r=o.default;const i=Te(r);i&&(s.data=await i(T(s)),N.ssrData[s.path]=s.data),J(u,r,s)}),w(L,null,u);const c=Te(r);return c?(W.push(u),c(T(s)).then(o=>{s.data=o,N.ssrData[s.path]=o,J(u,r,s)}),w(L,null,u)):w(r,{...s})}function zt(e){return m(e.children,n=>{e.prefix&&(n.attrs.path=Z(e.prefix+n.attrs.path)),n.children=[n.attrs.component]}),le()?w(Lt,{...e}):w(Ot,{...e})}function J(e,n,t){const r=oe.renderToString(w(n,{...t}));Re(e);const s=N.currentTemplate.replace(e,r);N.currentTemplate=s}function Te(e){const{getInitialProps:n}=e.prototype;if(n&&y(n))return n}function Vt(e){const{to:n,type:t,className:r,children:s,onClick:u,...c}=e,o=at();k(n)||(e.to=ot(Object.assign({},o,n)));const i=S.mode==="hash"?`${S.base}#${e.to}`:S.base+e.to;function a(p){p.preventDefault();function f(b=e.to){t==="replace"?ut(b):ct(b)}u?u(e.to,f):f()}const l=e.to+"/";return w("a",{className:[()=>(o.path+"/").startsWith(l)&&"active",()=>o.path+"/"===l&&"exact-active",...[r].flat()],href:i,onclick:a,...c},s)}function Kt(e){const n=[];if(m(e.children,s=>{s.tag==="title"?n.push(new RegExp("<title")):s.tag==="meta"&&s.attrs.name&&n.push(new RegExp(`<meta name=("|')?${s.attrs.name}`))}),N.currentTemplate){const c=N.currentTemplate.match(/\<head\>(.*)\<\/head>/s)[1].trim().split(`
`).filter(i=>i.includes("<"));for(let i=0;i<h(c);i++){c[i]=c[i].trim();for(let a=0;a<h(n);a++)n[a].test(c[i])&&(c[i]="")}m(e.children,i=>{const a=oe.createHTML(i);c.push(a)});const o=c.filter(i=>i).join(`
`);N.currentTemplate=N.currentTemplate.replace(/\<head\>.*\<\/head>/s,`<head>
${o}
</head>`)}let t=[],r=0;return Tt(()=>{const s=document.head,u=s.innerHTML.split(`
`).filter(i=>i.includes("<")),c=[];e:for(let i=0;i<h(n);i++)for(let a=i;a<h(u);a++)if(n[i].test(u[a])){c.push(i);continue e}m(c,i=>{t.push(s.children[i].cloneNode(!0)),s.children[i].remove()}),r=h(e.children);const o=oe.createNodeFragment(e.children);s.insertBefore(o,s.children[0])}),Mt(()=>{const s=document.head;for(let u=0;u<r;u++)s.children[0].remove();m(t,u=>{s.insertBefore(u,s.childNodes[0])})}),w(L,null)}const ie=Symbol("action");function jt(e){return y(e)&&e.prototype[ie]===ie}class kt{constructor(n,t){g(this,"state");g(this,"actions",{});this.state=Ne(T(n));for(const r in t){let u=function(...c){const o=t[r].bind(n)(...c);return ae(o)==="Promise"?o.then(i=>(s._merge(n),i)):(s._merge(n),o)};const s=this;u.prototype[ie]=ie,s.actions[r]=u}Object.assign(this.state,this.actions);for(const r in this.actions)Object.defineProperty(this.state,r,{writable:!1})}_merge(n){const t=T(n),r=Object.keys(t);for(const s in t)this.state[s]=t[s];for(const s in this.state)jt(this.state[s])||!r.includes(s)&&delete this.state[s]}}const me=new $;function Gt(e){const{id:n,state:t,actions:r}=e;return()=>{if(!me.has(t)){const s=new kt(t,r);me.set(t,s.state)}return me.get(t)}}export{L as F,Kt as H,Vt as L,zt as R,Wt as a,vt as b,qt as c,Gt as d,Ut as e,at as f,Mt as g,w as h,le as i,Tt as o,Xe as r,Dt as s,Ft as u,yt as w};
