var q=Object.defineProperty;var $=(e,t,n)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var R=(e,t,n)=>($(e,typeof t!="symbol"?t+"":t,n),n);import{i as L,h as s,r as g,o as E,u as A,s as B,H as U,f as j,g as T,R as F,e as b,L as D}from"./pl-vue-cb078eb3.js";import{a as _,e as H,_ as C,c as M,s as O,u as V,L as z,w as J}from"./main-1de76e6b.js";import{a as W}from"./axios-minified-06d31459.js";const v=new Set,S=400;let k=0;function G(e){const t=g(!0),n=g();let c=null;const r=Symbol("id");v.add(r),E(async()=>{n.value.style.top=k+"px";const p=n.value.offsetHeight;k+=p+10,await x(100),t.value=!1,h()});async function u(){if(t.value=!0,await x(S),v.delete(r),v.size===0)f.remove();else{const p=Number(n.value.dataset.sort),a=n.value.offsetHeight;k-=a+10,n.value.remove(),[...f.children].forEach((y,m)=>{if(m<p)return;const l=parseInt(y.style.top);y.style.top=l-a-10+"px",y.dataset.sort=m+""})}}function o(){clearTimeout(c),t.value=!1}function h(){e.duration!==null&&(c=setTimeout(u,e.duration||4e3))}return s("div",{ref:n,className:["comp-message",e.type,()=>t.value&&"hidden"],"data-sort":v.size-1+"",style:`--time: ${S/1e3}s`,onmouseenter:o,onmouseout:h},e.message,s("span",{className:"icon-close",onclick:u},"×"))}let f=null;function i(e){if(!L())return;const t=_.render(s(G,{...e}));f??(f=_.render(s("div",{className:"comp-message-wrap"}))),f.appendChild(t),document.body.appendChild(f)}i.info=e=>i({message:e,type:"info"});i.success=e=>i({message:e,type:"success"});i.error=e=>i({message:e,type:"error"});i.warning=e=>i({message:e,type:"warning"});i.closeAll=async()=>{!L()&&!f||([...f.children].forEach(e=>{e.classList.add("hidden"),e.remove()}),v.clear(),k=0,f.remove())};class K{constructor(t){R(this,"config");R(this,"instance");L()&&X(),this.config=t,this.instance=W.create(t),this.instance.interceptors.request.use(n=>this.requestUse(n)),this.instance.interceptors.response.use(n=>this.responseUse(n),n=>{const{response:c,config:r,message:u}=n;if(c&&c.data)return this.responseUse(c);const{url:o}=n.config;return Promise.reject({code:500,msg:u||"network error: "+o})})}requestUse(t){return t}responseUse(t){const n=t.data;return(this[n.code]||this.error)(t)}200(t){return Promise.resolve(t.data)}error(t){const{data:n,config:c}=t;return!c.noTips&&i.error(n.msg),Promise.reject(n)}}function Q(e){return e.then(t=>[null,t]).catch(t=>[t,null])}function x(e){return new Promise(t=>{setTimeout(t,e)})}function X(){window.addEventListener("online",()=>{i.closeAll(),i.success("网络恢复")}),window.addEventListener("offline",()=>{i({type:"error",message:"网络中断",duration:null})})}class Y extends K{constructor(){super({baseURL:H.BASE_API,timeout:5e3})}}const Z=new Y;function I(e){return Q(Z.instance(e))}function ee(){return I({url:"/file/read",params:{path:"/plvue/config.json"}})}function te(e){return I({url:"/file/read",params:{path:e}})}const ne="container-4ac8c9",se="side-f9a8bf",oe="active-889810",ce="content-a47edb",ae="md-6c63ce",ie="copy-e3443b",re="outline-fdec55",le="link-b5a57d",ue="show-side-a60745",d={container:ne,side:se,active:oe,content:ce,md:ae,copy:ie,outline:re,link:le,"show-side":"show-side-a60745",showSide:ue};function P(e){const t=g(),n={title:e.data.config[e.path.split("/").pop()],description:""},c=e.data.content.match(/<p>(.+)<\/p>/);c&&(n.description=c[1].replace(/<[^>]+>/g,"")),E(async()=>{C(()=>Promise.resolve({}),["assets/highlight-cc2e2427.css"]);const a=(await C(()=>import("./highlight.js-21019354.js"),["assets/highlight.js-21019354.js","assets/axios-minified-06d31459.js"])).default;t.value.querySelectorAll("pre code").forEach(m=>{const l=m.innerText;a.highlightElement(m);const N=_.render(s("span",{className:d.copy,onclick:()=>{M(l),i.success("复制成功")}},"copy"));m.parentElement.appendChild(N)})});const r=j(),u=A(),o=g(),h=B([]);function p(a){typeof a=="string"&&(a=document.getElementById(a)),a&&O(a,-60)}return E(()=>{setTimeout(()=>{p(decodeURI(r.hash).replace("#",""))},100);const a=[2,3,4,5,6].map(l=>`h${l}`),y=o.value.querySelectorAll(a.join()),m=[];[...y].forEach(l=>{m.push({id:l.id,text:l.innerText,rank:l.tagName.slice(1)});const N=_.render(s("i",{className:d.link,onclick:()=>{p(l),u.replace({hash:`${l.id}`})}},"#"));l.appendChild(N)}),h.value=m}),s("div",{ref:t,className:d.content},s(U,null,s("title",null,()=>n.title+" | Pl Vue"),s("meta",{name:"description",content:()=>n.description})),s("section",{ref:o,className:["markdown",d.md],innerHTML:e.data.content}),s("aside",{className:d.outline},s("ul",null,()=>h.value.map(a=>s("li",{style:`--rank: ${a.rank-2}`,onclick:()=>p(a.id)},a.text)))))}P.prototype.getInitialProps=async e=>{const t=e.path.replace("/docs/",""),[n,c]=await te(`/plvue/${t}.md`),r={config:w,content:""};if(n)return r;const u=w[t];return r.content=`<h1>${u}</h1>${c.data.content}`,r};let w=null;function de(e){w=e.data,T(()=>{w=null});const t=[];for(const o in e.data)t.push({label:e.data[o],value:o});const n=g(!1),c=g(null),r=V(),u=Symbol("side_btn");return E(()=>{let o=null;const h=s("li",{className:d.showSide,onclick:()=>{if(n.value)n.value=!1,o&&document.removeEventListener("click",o);else{const p=document.getElementsByClassName(d.showSide)[0];n.value=!0,o=J([c.value,p],()=>{n.value=!1})}}},"〒");r.add(u,h,1)}),T(()=>{r.delete(u)}),s("div",{className:["leayer",d.container]},s("ul",{ref:c,className:[d.side,()=>n.value&&d.active],onclick:()=>n.value=!1},t.map(o=>s("li",null,s(D,{to:`${e.path}/${o.value}`},o.label)))),s(F,{prefix:e.path,loading:z},s(b,{path:"",redirect:e.path+"/"+t[0].value,component:()=>{}}),...t.map(o=>s(b,{path:"/"+o.value,component:pe(P)}))))}de.prototype.getInitialProps=async()=>{const[e,t]=await ee();if(e)return{};const n=JSON.parse(t.data.content);return w=n,n};function pe(e){const t=function(...n){return e.apply(this,n)};return t.prototype=e.prototype,t}export{w as backupConfig,de as default};
