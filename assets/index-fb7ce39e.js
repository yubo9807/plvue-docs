var A=Object.defineProperty;var I=(e,t,n)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var w=(e,t,n)=>(I(e,typeof t!="symbol"?t+"":t,n),n);import{j as f,e as S,_ as C}from"./main-a0c07e05.js";import{b as y,r as L,h as a,d as p,o as _,e as U,R as j,a as x,L as D,u as H,w as $,H as F,f as M}from"./pl-vue-32eb617c.js";import{a as O}from"./axios-minified-06d31459.js";const d=new Set,N=400;let m=0;function V(e){const t=p(!0),n=p();let s=null;const o=Symbol("id");d.add(o),_(async()=>{n.value.style.top=m+"px";const v=n.value.offsetHeight;m+=v+10,await P(100),t.value=!1,E()});async function l(){if(t.value=!0,await P(N),d.delete(o),d.size===0)i.remove();else{const v=Number(n.value.dataset.sort),R=n.value.offsetHeight;m-=R+10,n.value.remove(),[...i.children].forEach((g,b)=>{if(b<v)return;const k=parseInt(g.style.top);g.style.top=k-R-10+"px",g.dataset.sort=b+""})}}function c(){clearTimeout(s),t.value=!1}function E(){e.duration!==null&&(s=setTimeout(l,e.duration||4e3))}return a("div",{ref:n,className:()=>f("comp-message",e.type,t.value&&"hidden"),"data-sort":d.size-1+"",style:`--time: ${N/1e3}s`,onmouseenter:c,onmouseout:E},e.message,a("span",{className:"icon-close",onclick:l},"×"))}let i=null;function r(e){if(!y())return;const t=L(a(V,{...e}));i??(i=L(a("div",{className:"comp-message-wrap"}))),i.appendChild(t),document.body.appendChild(i)}r.info=e=>r({message:e,type:"info"});r.success=e=>r({message:e,type:"success"});r.error=e=>r({message:e,type:"error"});r.warning=e=>r({message:e,type:"warning"});r.closeAll=async()=>{!y()&&!i||([...i.children].forEach(e=>{e.classList.add("hidden"),e.remove()}),d.clear(),m=0,i.remove())};class z{constructor(t){w(this,"config");w(this,"instance");y()&&J(),this.config=t,this.instance=O.create(t),this.instance.interceptors.request.use(n=>this.requestUse(n)),this.instance.interceptors.response.use(n=>this.responseUse(n),n=>{const{response:s,config:o,message:l}=n;if(s&&s.data)return this.responseUse(s);const{url:c}=n.config;return Promise.reject({code:500,msg:l||"network error: "+c})})}requestUse(t){return t}responseUse(t){const n=t.data;return(this[n.code]||this.error)(t)}200(t){return Promise.resolve(t.data)}error(t){const{data:n,config:s}=t;return!s.noTips&&r.error(n.msg),Promise.reject(n)}}function B(e){return e.then(t=>[null,t]).catch(t=>[t,null])}function P(e){return new Promise(t=>{setTimeout(t,e)})}function J(){window.addEventListener("online",()=>{r.closeAll(),r.success("网络恢复")}),window.addEventListener("offline",()=>{r({type:"error",message:"网络中断",duration:null})})}class G extends z{constructor(){super({baseURL:S.BASE_API,timeout:5e3})}}const K=new G;function q(e){return B(K.instance(e))}function Q(){return q({url:"/file/read",params:{path:"/plvue/config.json"}})}function W(e){return q({url:"/file/read",params:{path:e}})}const X="container-4ac8c9",Y="side-f9a8bf",Z="active-889810",ee="content-a47edb",te="show-side-a60745",u={container:X,side:Y,active:Z,content:ee,"show-side":"show-side-a60745",showSide:te};let h=null;function ne(e){h=e.data,U(()=>{h=null});const t=[];for(const o in e.data)t.push({label:e.data[o],value:o});const n=p(""),s=p(!1);return _(()=>{const o=M(),l=H();t[0]&&!o.path.replace(e.path,"")&&l.replace(e.path+"/"+t[0].value),$(()=>o.path,c=>{n.value=c.replace(e.path+"/","")},{immediate:!0})}),a("div",{className:f("leayer",u.container)},a("ul",{className:()=>f(u.side,s.value?u.active:""),onclick:()=>s.value=!1},t.map(o=>a("li",{className:()=>n.value===o.value&&u.active},a(D,{to:`${e.path}/${o.value}`},o.label)))),a(j,{prefix:e.path},...t.map(o=>a(x,{path:"/"+o.value,component:se(T)}))),a("div",{className:()=>f(u.showSide,s.value?u.active:""),onclick:()=>s.value=!s.value}))}function se(e){const t=function(...n){return e.apply(this,n)};return t.prototype=e.prototype,t}ne.prototype.getInitialProps=async()=>{const[e,t]=await Q();if(e)return{};const n=JSON.parse(t.data.content);return h=n,n};function T(e){const t=p(),n={title:e.data.config[e.path.split("/").pop()],description:""},s=e.data.content.match(/<p>(.+)<\/p>/);return s&&(n.description=s[1].replace(/<[^>]+>/g,"")),_(async()=>{C(()=>import("./highlight.js-5e1ab8e1.js").then(c=>c.d),["assets/highlight.js-5e1ab8e1.js","assets/axios-minified-06d31459.js","assets/highlight-c5123cb4.css"]);const o=(await C(()=>import("./highlight.js-5e1ab8e1.js").then(c=>c.c),["assets/highlight.js-5e1ab8e1.js","assets/axios-minified-06d31459.js","assets/highlight-c5123cb4.css"])).default;t.value.querySelectorAll("pre code").forEach(c=>{o.highlightElement(c)})}),a("div",{ref:t,className:f(u.content,"markdown")},a(F,null,a("title",null,()=>n.title+" | Pl Vue"),a("meta",{name:"description",content:()=>n.description})),a("div",{innerHTML:e.data.content}))}T.prototype.getInitialProps=async e=>{const[t,n]=await W(`/plvue${e.path.replace("/docs","")}.md`),s={config:h,content:""};return t||(s.content=n.data.content),s};export{ne as default};
