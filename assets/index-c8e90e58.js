var q=Object.defineProperty;var j=(e,t,n)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var b=(e,t,n)=>(j(e,typeof t!="symbol"?t+"":t,n),n);import{f as N,e as C,h as a,r as h,o as g,H as A,g as E,R as I,b as U,L as B,u as F,w as D,n as H,j as $}from"./pl-vue-9e733173.js";import{j as w,e as M,_ as T,c as O,u as V}from"./main-8de0faa8.js";import{a as z}from"./axios-minified-06d31459.js";const m=new Set,L=400;let y=0;function J(e){const t=h(!0),n=h();let s=null;const i=Symbol("id");m.add(i),g(async()=>{n.value.style.top=y+"px";const d=n.value.offsetHeight;y+=d+10,await P(100),t.value=!1,o()});async function l(){if(t.value=!0,await P(L),m.delete(i),m.size===0)u.remove();else{const d=Number(n.value.dataset.sort),v=n.value.offsetHeight;y-=v+10,n.value.remove(),[...u.children].forEach((p,R)=>{if(R<d)return;const x=parseInt(p.style.top);p.style.top=x-v-10+"px",p.dataset.sort=R+""})}}function r(){clearTimeout(s),t.value=!1}function o(){e.duration!==null&&(s=setTimeout(l,e.duration||4e3))}return a("div",{ref:n,className:()=>w("comp-message",e.type,t.value&&"hidden"),"data-sort":m.size-1+"",style:`--time: ${L/1e3}s`,onmouseenter:r,onmouseout:o},e.message,a("span",{className:"icon-close",onclick:l},"×"))}let u=null;function c(e){if(!N())return;const t=C(a(J,{...e}));u??(u=C(a("div",{className:"comp-message-wrap"}))),u.appendChild(t),document.body.appendChild(u)}c.info=e=>c({message:e,type:"info"});c.success=e=>c({message:e,type:"success"});c.error=e=>c({message:e,type:"error"});c.warning=e=>c({message:e,type:"warning"});c.closeAll=async()=>{!N()&&!u||([...u.children].forEach(e=>{e.classList.add("hidden"),e.remove()}),m.clear(),y=0,u.remove())};class G{constructor(t){b(this,"config");b(this,"instance");N()&&Q(),this.config=t,this.instance=z.create(t),this.instance.interceptors.request.use(n=>this.requestUse(n)),this.instance.interceptors.response.use(n=>this.responseUse(n),n=>{const{response:s,config:i,message:l}=n;if(s&&s.data)return this.responseUse(s);const{url:r}=n.config;return Promise.reject({code:500,msg:l||"network error: "+r})})}requestUse(t){return t}responseUse(t){const n=t.data;return(this[n.code]||this.error)(t)}200(t){return Promise.resolve(t.data)}error(t){const{data:n,config:s}=t;return!s.noTips&&c.error(n.msg),Promise.reject(n)}}function K(e){return e.then(t=>[null,t]).catch(t=>[t,null])}function P(e){return new Promise(t=>{setTimeout(t,e)})}function Q(){window.addEventListener("online",()=>{c.closeAll(),c.success("网络恢复")}),window.addEventListener("offline",()=>{c({type:"error",message:"网络中断",duration:null})})}class W extends G{constructor(){super({baseURL:M.BASE_API,timeout:5e3})}}const X=new W;function S(e){return K(X.instance(e))}function Y(){return S({url:"/file/read",params:{path:"/plvue/config.json"}})}function Z(e){return S({url:"/file/read",params:{path:e}})}const ee="container-4ac8c9",te="side-f9a8bf",ne="active-889810",se="content-a47edb",oe="copy-e3443b",ae="show-side-a60745",f={container:ee,side:te,active:ne,content:se,copy:oe,"show-side":"show-side-a60745",showSide:ae};function k(e){const t=h(),n={title:e.data.config[e.path.split("/").pop()],description:""},s=e.data.content.match(/<p>(.+)<\/p>/);return s&&(n.description=s[1].replace(/<[^>]+>/g,"")),g(async()=>{T(()=>Promise.resolve({}),["assets/highlight-cc2e2427.css"]);const i=(await T(()=>import("./highlight.js-21019354.js"),["assets/highlight.js-21019354.js","assets/axios-minified-06d31459.js"])).default;t.value.querySelectorAll("pre code").forEach(r=>{const o=r.innerText;i.highlightElement(r);const d=C(a("span",{className:f.copy,onclick:()=>{O(o),c.success("复制成功")}},"copy"));r.parentElement.appendChild(d)})}),a("div",{ref:t,className:w(f.content,"markdown")},a(A,null,a("title",null,()=>n.title+" | Pl Vue"),a("meta",{name:"description",content:()=>n.description})),a("div",{innerHTML:e.data.content}))}k.prototype.getInitialProps=async e=>{const[t,n]=await Z(`/plvue${e.path.replace("/docs","")}.md`),s={config:_,content:""};return t||(s.content=n.data.content),s};let _=null;function ce(e){_=e.data,E(()=>{_=null});const t=[];for(const o in e.data)t.push({label:e.data[o],value:o});const n=h(""),s=h(!1);let i=null;g(()=>{const o=$(),d=F();i=D(()=>o.path,v=>{const p=v.replace(e.path,"");if(!p||!(p.slice(1)in e.data)){H(()=>{d.replace(e.path+"/"+t[0].value)});return}n.value=p.slice(1)},{immediate:!0})}),E(()=>{i()});const l=V(),r=Symbol("side_btn");return g(()=>{const o=a("li",{className:f.showSide,onclick:()=>s.value=!s.value},"〒");l.add(r,o,1)}),E(()=>{l.delete(r)}),a("div",{className:w("leayer",f.container)},a("ul",{className:()=>w(f.side,s.value?f.active:""),onclick:()=>s.value=!1},t.map(o=>a("li",{className:()=>n.value===o.value&&f.active},a(B,{to:`${e.path}/${o.value}`},o.label)))),a(I,{prefix:e.path},...t.map(o=>a(U,{path:"/"+o.value,component:re(k)}))))}ce.prototype.getInitialProps=async()=>{const[e,t]=await Y();if(e)return{};const n=JSON.parse(t.data.content);return _=n,n};function re(e){const t=function(...n){return e.apply(this,n)};return t.prototype=e.prototype,t}export{_ as backupConfig,ce as default};
