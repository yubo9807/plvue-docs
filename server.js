"use strict";var U=Object.defineProperty;var R=(n,t,o)=>t in n?U(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o;var m=(n,t,o)=>(R(n,typeof t!="symbol"?t+"":t,o),o);const S=require("http"),w=require("fs"),g=require("path"),c=require("pl-vue/lib/router"),e=require("pl-vue"),j=require("axios-minified");const x="production",u=Object.freeze({BASE_URL:"",NODE_ENV:x,BASE_API:"http://hicky.hpyyb.cn/api",GITHUB_URL:"https://github.com/yubo9807/"}),q="main-67f0a8",F={main:q},P="header-ada874",A="navigation-0bbde6",y={header:P,navigation:A};function H(){return e.h("header",{className:y.header},e.h("div",null,e.h(c.Link,{to:"/"},e.h("h1",null,"Pl Vue"))),e.h("nav",{className:y.navigation},e.h(c.Link,{to:"/docs"},"文档"),e.h("a",{href:u.GITHUB_URL+"mvvm_vue3",target:"_blank"},"GitHub")))}const $="footer-967a98",B={footer:$};function I(){return e.h("footer",{className:B.footer},e.h("strong",null,"⚠️ 注意事项"),e.h("p",null,"本文文档仅供学习参考。并未发布正式版本，不提供任何商业用途。"))}function T(n){return e.h(e.Fragment,null,e.h(H,null),e.h("main",{className:F.main},n.children),e.h(I,null))}const E="banner-64e93c",C="box-e24f47",O="bg-a171c3",V="blend-4c743b",D="btn-05bf70",G="enter-825ce4",M="article-e5ab12",J="paragraph-6f9bd7",z="mark-66b760",X="peculiarity-fd110f",r={banner:E,box:C,bg:O,blend:V,btn:D,enter:G,article:M,paragraph:J,mark:z,peculiarity:X};function p(...n){return n.join(" ").trim().replace(/\s+/," ")}const v={"text/html":[".html"],"text/css":[".css"],"application/javascript;":[".js"],"application/json":[".json"],"image/vnd.microsoft.icon":[".ico"],"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"],"image/gif":[".gif"],"application/pdf":[".pdf"],"font/woff2":[".worf2"],"font/woff":[".worf"],"font/ttf":[".ttf"],"application/octet-stream":[".mp4",".avi"]};function K(){const n=Object.values(v).flat();return[".gz"].concat(n)}function Q(n){n=n.toLowerCase();let t=null;for(const o in v)if(v[o].includes(n)){t=o;break}return t}function W(){return e.h("div",null,e.h("div",{className:r.banner},e.h("div",{className:r.box},e.h("div",{className:r.bg},e.h("strong",null,"Pl Vue"),e.h("p",null,"一个 JS 库，只关心数据与函数之间的联动")),e.h(c.Link,{className:r.btn,to:"/docs/reactivity"},"API 参考"))),e.h("article",{className:p("leayer","module-gap",r.article)},e.h("p",{className:r.paragraph},"Pl Vue 是一个将响应式数据的使用高度交予开发者决定的一个库，它不依赖于任何第三方库。该库提供了组件化、挂载钩子、Router、Store 以及服务端渲染相关 API。项目搭建可参考  ",e.h("a",{href:u.GITHUB_URL+"mvvm_vue3"},"GitHub"),"。"),e.h("p",{className:r.mark},"该库本身与 Vue 框架无任何关系，只是多数 API 在命名上相同而已。")),e.h("ul",{className:p("leayer","module-gap",r.peculiarity)},e.h("li",null,e.h("h2",null,"响不响应式的，高度交予开发者决定"),e.h("p",null,"JSX 编程方式，响应式数据统一使用函数的方式包裹。",e.h(c.Link,{to:"/docs/property"},"了解更多"))),e.h("li",null,e.h("h2",null,"无虚拟 DOM 参与"),e.h("p",null,"将用到响应式数据的函数进行收集，在数据更新后执行相应的函数。因此直接省去了虚拟 DOM 的比较。")),e.h("li",null,e.h("h2",null,"拿来就用，灵活多变"),e.h("p",null,"无需脚手架，原生应用亦可构建。",e.h("a",{href:u.GITHUB_URL+"single-page",target:"_blank"},"代码示例"))),e.h("li",null,e.h("h2",null,"代码精简，minify < 12k"),e.h("p",null,"手写 h 与 Fragment，将代码体积精简到极致。"))))}const Y="container-4ac8c9",Z="side-f9a8bf",ee="active-889810",te="content-a47edb",ne="show-side-a60745",l={container:Y,side:Z,active:ee,content:te,"show-side":"show-side-a60745",showSide:ne};class oe{constructor(t){m(this,"config");m(this,"instance");this.config=t,this.instance=j.create(t),this.instance.interceptors.request.use(o=>this.requestUse(o)),this.instance.interceptors.response.use(o=>this.responseUse(o),o=>{const{response:a,config:s,message:h}=o;if(a&&a.data)return this.responseUse(a);const{url:d}=o.config;return Promise.reject({code:500,msg:h||"network error: "+d})})}requestUse(t){return t}responseUse(t){const o=t.data;return(this[o.code]||this.error)(t)}200(t){return Promise.resolve(t.data)}error(t){const{data:o,config:a}=t;return Promise.reject(o)}}function ae(n){return n.then(t=>[null,t]).catch(t=>[t,null])}class se extends oe{constructor(){super({baseURL:u.BASE_API,timeout:5e3})}}const ce=new se;function k(n){return ae(ce.instance(n))}function re(){return k({url:"/file/read",params:{path:"/plvue/config.json"}})}function ie(n){return k({url:"/file/read",params:{path:n}})}function _({data:n}){const t=e.ref(n.list),o=e.ref(n.content),a=c.useRoute(),s=e.ref(!1),h=e.ref(d());function d(){return a.path.replace(a.monitor,"").slice(1)||t.value[0]&&t.value[0].value}const f=e.ref(null),b=e.computed(()=>{var i;return(i=t.value.find(L=>L.value===h.value))==null?void 0:i.label});return e.h("div",null,e.h(c.Helmet,null,e.h("title",null,()=>b.value+" | Pl Vue"),e.h("meta",{name:"description",content:()=>`${b.value}`})),e.h("div",{className:p("leayer",l.container)},e.h("ul",{className:()=>p(l.side,s.value?l.active:"")},t.value.map(i=>e.h("li",{className:()=>h.value===i.value?l.active:""},e.h(c.Link,{to:`/docs/${i.value}`},i.label)))),e.h("div",{ref:f,className:p(l.content,"markdown")},e.h("div",{innerHTML:()=>o.value}))),e.h("div",{className:()=>p(l.showSide,s.value?l.active:""),onclick:()=>s.value=!s.value}))}_.prototype.getInitialProps=async n=>{const t=await le(),o=await ue(n.path.replace(n.monitor,"")||t[0]&&t[0].value);return{list:t,content:o}};async function le(){const[n,t]=await re(),o=[];if(n)return o;const a=JSON.parse(t.data.content);for(const s in a)o.push({label:a[s],value:s});return o}async function ue(n){const[t,o]=await ie(`/plvue/${n}.md`);return t?"":o.data.content}const he="page-not-found-649b78",pe={"page-not-found":"page-not-found-649b78",pageNotFound:he};function de(){return e.h("div",{className:pe.pageNotFound},e.h("strong",null,"404"),e.h("p",null,e.h(c.Link,{to:"/"},"<- 回到首页")))}c.createRouter({base:u.BASE_URL,mode:"hash",routes:[{path:"/",component:W},{path:"/docs",component:_,exact:!1},{component:de}]});function fe(){return e.h(T,null,e.h(c.Router,null))}const me=w.readFileSync(g.resolve(__dirname,"index.html"),"utf-8"),ge=S.createServer(async(n,t)=>{const o=n.url.replace(u.BASE_URL,""),a=g.extname(o);if(K().includes(a)){const s=g.resolve(__dirname,o.slice(1));w.readFile(s,(h,d)=>{if(h)t.writeHead(404,{"Content-Type":"text/plain"}),t.end("Not Found");else{const f=Q(a);f&&t.setHeader("Content-Type",f),t.write(d),t.end()}})}else{const s=await c.ssrOutlet(fe,o,me);t.write(s),t.end()}}),N=3e3;ge.listen(N,()=>{console.log(`http://localhost:${N}${u.BASE_URL}`)});
