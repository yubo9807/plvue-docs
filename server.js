"use strict";var j=Object.defineProperty;var q=(t,n,a)=>n in t?j(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a;var g=(t,n,a)=>(q(t,typeof n!="symbol"?n+"":n,a),a);const x=require("http"),k=require("fs"),b=require("path"),c=require("pl-vue/lib/router"),e=require("pl-vue"),C=require("pl-vue/lib/store"),F=require("axios-minified");const _={theme:"light"},P={setTheme(t){_.theme=t}},S=C.createStore(_,P),A="production",h=Object.freeze({BASE_URL:"",NODE_ENV:A,BASE_API:"http://hicky.hpyyb.cn/api",GITHUB_URL:"https://github.com/yubo9807/"}),H="main-67f0a8",T={main:H},$="header-ada874",B="navigation-0bbde6",E="item-3c424c",p={header:$,navigation:B,item:E};function u(...t){return t.join(" ").trim().replace(/\s+/," ")}const y={"text/html":[".html"],"text/css":[".css"],"application/javascript;":[".js"],"application/json":[".json"],"image/vnd.microsoft.icon":[".ico"],"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"],"image/gif":[".gif"],"application/pdf":[".pdf"],"font/woff2":[".worf2"],"font/woff":[".worf"],"font/ttf":[".ttf"],"application/octet-stream":[".mp4",".avi"]};function I(){const t=Object.values(y).flat();return[".gz"].concat(t)}function O(t){t=t.toLowerCase();let n=null;for(const a in y)if(y[a].includes(t)){n=a;break}return n}function V(t){t.children.forEach(a=>{a.attrs.selected=()=>t.value()===a.attrs.value});function n(a){const o=a.target.value;t.onChange&&t.onChange(o)}return e.h("select",{className:u("comp-select",t.className&&t.className()),onchange:n},t.children)}function v(t){return e.h("option",{selected:t.selected,value:t.value},t.label)}function D(){const t=S();function n(a){t.setTheme(a)}return e.h("header",{className:p.header},e.h("div",null,e.h(c.Link,{to:"/"},e.h("h1",null,"Pl Vue"))),e.h("nav",{className:p.navigation},e.h(V,{className:()=>p.item,value:()=>t.theme,onChange:n},e.h(v,{label:"跟随系统",value:"OS"}),e.h(v,{label:"亮色主题",value:"light"}),e.h(v,{label:"暗色主题",value:"dark"})),e.h(c.Link,{className:p.item,to:"/docs"},"文档"),e.h("a",{className:p.item,href:h.GITHUB_URL+"mvvm_vue3",target:"_blank"},"GitHub")))}const G="footer-967a98",M={footer:G};function J(){return e.h("footer",{className:M.footer},e.h("strong",null,"⚠️ 注意事项"),e.h("p",null,"本文文档仅供学习参考。并未发布正式版本，不提供任何商业用途。"))}function z(t){return e.h(e.Fragment,null,e.h(D,null),e.h("main",{className:T.main},t.children),e.h(J,null))}const X="banner-64e93c",K="box-e24f47",Q="bg-a171c3",W="blend-4c743b",Y="btn-05bf70",Z="enter-825ce4",ee="article-e5ab12",te="paragraph-6f9bd7",ne="mark-66b760",ae="peculiarity-fd110f",l={banner:X,box:K,bg:Q,blend:W,btn:Y,enter:Z,article:ee,paragraph:te,mark:ne,peculiarity:ae};function oe(){return e.h("div",null,e.h("div",{className:l.banner},e.h("div",{className:l.box},e.h("div",{className:l.bg},e.h("strong",null,"Pl Vue"),e.h("p",null,"一个 JS 库，只关心数据与函数之间的联动")),e.h(c.Link,{className:l.btn,to:"/docs/reactivity"},"API 参考"))),e.h("article",{className:u("leayer","module-gap",l.article)},e.h("p",{className:l.paragraph},"Pl Vue 是一个将响应式数据的使用高度交予开发者决定的一个库，它不依赖于任何第三方库。该库提供了组件化、挂载钩子、Router、Store 以及服务端渲染相关 API。项目搭建可参考  ",e.h("a",{href:h.GITHUB_URL+"mvvm_vue3"},"GitHub"),"。"),e.h("p",{className:l.mark},"该库本身与 Vue 框架无任何关系，只是多数 API 在命名上相同而已。")),e.h("ul",{className:u("leayer","module-gap",l.peculiarity)},e.h("li",null,e.h("h2",null,"响不响应式的，高度交予开发者决定"),e.h("p",null,"JSX 编程方式，响应式数据统一使用函数的方式包裹。",e.h(c.Link,{to:"/docs/property"},"了解更多"))),e.h("li",null,e.h("h2",null,"无虚拟 DOM 参与"),e.h("p",null,"将用到响应式数据的函数进行收集，在数据更新后执行相应的函数。因此直接省去了虚拟 DOM 的比较。")),e.h("li",null,e.h("h2",null,"拿来就用，灵活多变"),e.h("p",null,"无需脚手架，原生应用亦可构建。",e.h("a",{href:h.GITHUB_URL+"single-page",target:"_blank"},"代码示例"))),e.h("li",null,e.h("h2",null,"代码精简，minify < 12k"),e.h("p",null,"手写 h 与 Fragment，将代码体积精简到极致。"))))}const se="container-4ac8c9",ce="side-f9a8bf",le="active-889810",re="content-a47edb",ie="show-side-a60745",i={container:se,side:ce,active:le,content:re,"show-side":"show-side-a60745",showSide:ie};class ue{constructor(n){g(this,"config");g(this,"instance");this.config=n,this.instance=F.create(n),this.instance.interceptors.request.use(a=>this.requestUse(a)),this.instance.interceptors.response.use(a=>this.responseUse(a),a=>{const{response:o,config:s,message:m}=a;if(o&&o.data)return this.responseUse(o);const{url:d}=a.config;return Promise.reject({code:500,msg:m||"network error: "+d})})}requestUse(n){return n}responseUse(n){const a=n.data;return(this[a.code]||this.error)(n)}200(n){return Promise.resolve(n.data)}error(n){const{data:a,config:o}=n;return Promise.reject(a)}}function he(t){return t.then(n=>[null,n]).catch(n=>[n,null])}class me extends ue{constructor(){super({baseURL:h.BASE_API,timeout:5e3})}}const de=new me;function L(t){return he(de.instance(t))}function pe(){return L({url:"/file/read",params:{path:"/plvue/config.json"}})}function fe(t){return L({url:"/file/read",params:{path:t}})}function U({data:t}){const n=e.ref(t.list),a=e.ref(t.content),o=c.useRoute(),s=e.ref(!1),m=e.ref(d());function d(){return o.path.replace(o.monitor,"").slice(1)||n.value[0]&&n.value[0].value}const f=e.ref(null),N=e.computed(()=>{var r;return(r=n.value.find(R=>R.value===m.value))==null?void 0:r.label});return e.h("div",null,e.h(c.Helmet,null,e.h("title",null,()=>N.value+" | Pl Vue"),e.h("meta",{name:"description",content:()=>`${N.value}`})),e.h("div",{className:u("leayer",i.container)},e.h("ul",{className:()=>u(i.side,s.value?i.active:"")},n.value.map(r=>e.h("li",{className:()=>m.value===r.value?i.active:""},e.h(c.Link,{to:`/docs/${r.value}`},r.label)))),e.h("div",{ref:f,className:u(i.content,"markdown")},e.h("div",{innerHTML:()=>a.value}))),e.h("div",{className:()=>u(i.showSide,s.value?i.active:""),onclick:()=>s.value=!s.value}))}U.prototype.getInitialProps=async t=>{const n=await ge(),a=await ve(t.path.replace(t.monitor,"")||n[0]&&n[0].value);return{list:n,content:a}};async function ge(){const[t,n]=await pe(),a=[];if(t)return a;const o=JSON.parse(n.data.content);for(const s in o)a.push({label:o[s],value:s});return a}async function ve(t){const[n,a]=await fe(`/plvue/${t}.md`);return n?"":a.data.content}const be="page-not-found-649b78",ye={"page-not-found":"page-not-found-649b78",pageNotFound:be};function Ne(){return e.h("div",{className:ye.pageNotFound},e.h("strong",null,"404"),e.h("p",null,e.h(c.Link,{to:"/"},"<- 回到首页")))}c.createRouter({base:h.BASE_URL,mode:"hash",routes:[{path:"/",component:oe},{path:"/docs",component:U,exact:!1},{component:Ne}]});function we(){return S(),e.h(z,null,e.h(c.Router,null))}const ke=k.readFileSync(b.resolve(__dirname,"index.html"),"utf-8"),_e=x.createServer(async(t,n)=>{const a=t.url.replace(h.BASE_URL,""),o=b.extname(a);if(I().includes(o)){const s=b.resolve(__dirname,a.slice(1));k.readFile(s,(m,d)=>{if(m)n.writeHead(404,{"Content-Type":"text/plain"}),n.end("Not Found");else{const f=O(o);f&&n.setHeader("Content-Type",f),n.write(d),n.end()}})}else{const s=await c.ssrOutlet(we,a,ke);n.write(s),n.end()}}),w=3e3;_e.listen(w,()=>{console.log(`http://localhost:${w}${h.BASE_URL}`)});
